(function($){"use strict";$(document).ready(function(){document.addEventListener('wpcf7mailsent',function(event){if(event.detail.apiResponse.redirect){$('.wpcf7-response-output').addClass('d-none');location.href=event.detail.apiResponse.redirect}},!1);$(document).scroll(function(){if($(document).scrollTop()>0){$('.header-2').css('position','fixed')}else{$('.header-2').css('position','absolute')}});var iconSize=$('body').hasClass('mobile')?'x2':'x3';$("select.ddl").selectBoxIt({downArrowIcon:"icon-arrowdown-01-color6 icon-"+iconSize});$('.js-level-slider').slick({infinite:!0,rtl:!0,slidesToShow:5,slidesToScroll:1,draggable:!0,arrows:!0,nextArrow:'<i class="slick-arrow slick-next icon icon-arrowright color-6 icon-x3 y-align cursor-pointer"></i>',prevArrow:'<i class="slick-arrow slick-prev icon icon-arrowleft color-6 icon-x3 y-align cursor-pointer"></i>',dots:!1,responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:993,settings:{slidesToShow:2}},{breakpoint:568,settings:{slidesToShow:1}}]});$('.js-members-slider').slick({rows:3,infinite:!0,rtl:!0,slidesToShow:3,slidesToScroll:3,draggable:!0,arrows:!0,nextArrow:'<i class="slick-arrow slick-next icon icon-arrowright color-6 icon-x3 y-align cursor-pointer"></i>',prevArrow:'<i class="slick-arrow slick-prev icon icon-arrowleft color-6 icon-x3 y-align cursor-pointer"></i>',dots:!1,responsive:[{breakpoint:1025,settings:{slidesToShow:2}},{breakpoint:569,settings:{slidesToShow:1}}]});$('.js-insurance-logos-slider').slick({infinite:!0,rtl:!0,slidesToShow:10,slidesToScroll:1,autoplay:!0,draggable:!0,arrows:!1,dots:!1,responsive:[{breakpoint:1025,settings:{slidesToShow:2}},{breakpoint:569,settings:{slidesToShow:1}}]});$('.js-page-loader-slider').slick({infinite:!0,speed:300,autoplaySpeed:500,rtl:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,draggable:!0,arrows:!1,dots:!1,responsive:[{breakpoint:1025,settings:{slidesToShow:1}},{breakpoint:569,settings:{slidesToShow:1}}]});$(window).scroll(function(){if($(this).scrollTop()>100){$('#scrollToTop').removeClass('hide')}else{$('#scrollToTop').addClass('hide')}});$('#scrollToTop').click(function(){$('html, body').animate({scrollTop:0},300)});$('.product-comment-form').on('click',function(e){e.preventDefault();$('#review_form_wrapper').find('#review_form').removeClass('hidden-xl-down')});$('.wonderplugin3dcarousel-item').find('.wonderplugin3dcarousel-item-container').next().find('div').remove();$('.wonderplugin3dcarousel-item').on('click',function(){$('#threedcarousel-html5-lightbox').find('#html5-watermark').remove()});function animationClick(element,animation){element=$(element);element.click(function(){element.addClass('animated '+animation);window.setTimeout(function(){element.removeClass('animated '+animation)},2000)})}
function animationHover(element,animation){element=$(element);element.hover(function(){element.addClass('animated '+animation)},function(){window.setTimeout(function(){element.removeClass('animated '+animation)},2000)})}
var byMail=$('.receive-offer-by-email');byMail.on('click',function(){var cube_wrapper=$(this).closest('.insurance-cube-wrapper');if(!cube_wrapper.find($('.contact-us-by-mail')).hasClass('d-none')){cube_wrapper.find($('.contact-us-by-mail')).addClass('d-none')}else{cube_wrapper.find($('.contact-us-by-mail')).removeClass('d-none').addClass('animated fadeInRight')}
if(!cube_wrapper.find($('.contact-us-by-phone')).hasClass('d-none')){cube_wrapper.find($('.contact-us-by-phone')).addClass('d-none')}});var byPhone=$('.receive-offer-by-phone');byPhone.on('click',function(){var cube_wrapper=$(this).closest('.insurance-cube-wrapper');if(!cube_wrapper.find($('.contact-us-by-phone')).hasClass('d-none')){cube_wrapper.find($('.contact-us-by-phone')).addClass('d-none')}else{cube_wrapper.find($('.contact-us-by-phone')).removeClass('d-none').addClass('animated fadeInRight');if($('body').hasClass('mobile')){$('html, body').animate({scrollTop:cube_wrapper.find('.contact-us-by-phone').offset().top-300+'px'},'slow')}}
if(!cube_wrapper.find($('.contact-us-by-mail')).hasClass('d-none')){cube_wrapper.find($('.contact-us-by-mail')).addClass('d-none')}});var showMoreDetails=$('.compare-show-more-details-a');showMoreDetails.on('click',function(){$(this).find('.custom-circle i').toggleClass('icon-plus-01-colorwhite');$(this).find('.custom-circle i').toggleClass('icon-minus-01-colorwhite')});var waypoints1=$('.data-animation-1').waypoint({handler:function(){var obj=this.element;$(obj).addClass('car-animate carFromSide1')},offset:'90%'});var waypoints2=$('.data-animation-2').waypoint({handler:function(){var obj=this.element;$(obj).addClass('car-animate carFromSide2')},offset:'90%'});var waypoints3=$('.data-animation-3').waypoint({handler:function(){var obj=this.element;$(obj).addClass('car-animate carFromSide3')},offset:'90%'});var waypoints4=$('.data-animation-4').waypoint({handler:function(){var obj=this.element;$(obj).addClass('car-animate carFromSide4')},offset:'90%'});$("#use-another-address").on("click",function(){var additionalInfo=$('.another-address');if($(this).is(':checked')){additionalInfo.removeClass('d-none');additionalInfo.find('input').attr('disabled',!1)}else{additionalInfo.find('input').attr('disabled',!0);additionalInfo.addClass('d-none')}});$(document).on("focus","#city-another",function(){var $this=$(this);$this.autocomplete({source:function(request,response){$.ajax({type:"POST",dataType:"json",url:sogo.ajaxurl,data:{'action':'sogo_get_cities','search':request.term},success:function(data){response($.map(data,function(item){return{label:item.city,value:item.city}}))}})},select:function(event,ui){$this.val(ui.item.value);return!1}})});var $driver_details='';function get_relevant_drivers_tab_title(count_drivers,insurance_owner_driving_to){var title='',count_drivers=count_drivers,ins_owner_drive=insurance_owner_driving_to,tab_header=$('#tab4-drivers .card-header').find('a'),tab_header_icon='<i class="icon-check-01-colorwhite icon-x2 ml-1 d-none"></i>';console.log(count_drivers+'_'+ins_owner_drive)
switch(count_drivers+'_'+ins_owner_drive){case '1_2':title='פרטי הנהג היחיד';break;case '2_2':title='פרטי הנהגים';break;case '2_1':title='פרטי הנהג הנוסף';break;case '3_2':title='פרטי הנהגים';break;case '3_1':title='פרטי הנהגים הנוספים';break;case '4_2':title='פרטי הנהג הצעיר ביותר';break}
tab_header.html(tab_header_icon+title)}
$(document).on('click','.drive-allowed',function(){if($(this).is(':checked')){var result=$(this).val(),allowed_drivers_in_car=$('#allowed_to_drive').data('allowed'),$drivers_tab_message_elem=$('#drivers_tab_message');get_relevant_drivers_tab_title(allowed_drivers_in_car,result);$drivers_tab_message_elem.addClass('d-none');if(+result===1){var message='',lowest_seniority=$('#drivers_tab_message').data('lowest-seniority'),youngest_driver_age=$('#drivers_tab_message').data('youngest-driver-age');if(+allowed_drivers_in_car===4){message='כל נהג מגיל '+youngest_driver_age+' , וותק נהיגה החל מ '+lowest_seniority+' שנים'}else if(+allowed_drivers_in_car===1){message='בעל הפוליסה הינו הנהג היחיד ברכב'}
if($drivers_tab_message_elem.hasClass('d-none')){$drivers_tab_message_elem.removeClass('d-none')}
$drivers_tab_message_elem.html('<p class="text-4 color-3 text-center">'+message+'</p>')}
var driverBoxes=$('#allowed_to_drive .driver-box');allowed_drivers_in_car=(+allowed_drivers_in_car===4)?1:allowed_drivers_in_car;console.log(result)
if(+result===1){$(document).find('#form-2 .license-box').removeClass('d-none');$(document).find('#form-2 #license-year').attr('disabled',!1);if(+allowed_drivers_in_car!==1){$(document).find('.driver-box').last().addClass('d-none');$(document).find('.driver-box').last().find('input, select').attr('disabled',!0)}else if(+allowed_drivers_in_car===1){$(document).find('.driver-box').addClass('d-none');$(document).find('.driver-box').find('input, select').attr('disabled',!0)}
sogo_trigger_license_year()}else if(result==='2'){$(document).find('#form-2 .license-box').addClass('d-none');$(document).find('#form-2 #license-year').attr('disabled',!0);$(document).find('.driver-box').removeClass('d-none');$(document).find('.driver-box').last().find('input, select').attr('disabled',!1);$('#tab4-drivers').removeClass('d-none')}}
$('.single-driver-js').toggleClass('d-none');$('.multi-driver-js').toggleClass('d-none')});var isEqual=function(arg1,arg2){var message='<label id="driver-identical-number-error" class="error" for="driver-identical-number">אי אפשר להזין תאודת זהות זהה</label>'
if(arg1==arg2){return message}else{return!1}};$.validator.addMethod('isEqual',function(arg1,arg2){return arg1==arg2},"אי אפשר להזין תאודת זהות זהה");$(document).on('blur','input[name*="identical-number"]',function(){var current=$(this);if(current.parent().find('.driver-identical-number-error').length>0){current.parent().find('.driver-identical-number-error').remove()}
var arr=[];var message='<label class="error driver-identical-number-error" for="driver-identical-number">אי אפשר להזין תעודת זהות זהה</label>';$('input[name*="identical-number"]').each(function(){$(this).removeClass('error');if($(this).val()!==''){if(arr.indexOf($(this).val())===-1){arr.push($(this).val())}else{current.addClass('error');current.parent().append(message);return!1}}})});$('.upsale-checkbox').on('click',function(){let total_price=0;$('.upsale-checkbox').each(function(){if($(this).is(":checked")){total_price+=parseInt($(this).attr('data-price'))}});$("#upsales_price").val(total_price);$('#headingSix').trigger('mouseover')});$('.insurance-submit-payment').on('click',function(e){e.preventDefault();console.log($('input[name="driver-birthday[]"]').val())
var form=$('#form-2');var $this=$(this);var card=$(this).closest('.card');var licenseNumber=$('#license-number').val();var firstName=$('#first-name').val();var email=$('#email').val();var card_is_valid=!0;card.find('input, select, textarea').each(function(){if(!$(this).valid()){card_is_valid=!1}});var link=$(this).data('link');if(card_is_valid){$(this).closest('.content-top').prev().find('.selected-header-box').html('');card.removeClass('card-current').addClass('card-visited-2');card.find('.card-header a').find('i').removeClass('d-none');card.find('a').attr('data-toggle','collapse').trigger('click');var additionalInfo='ללא עבר פלילי';var licenseRevocation='';var city=$('#city').val();if($('#license-suspensions option:selected').val()==='0'){licenseRevocation='ללא שלילות'}
if($('#license-suspensions option:selected').val()==='1'){licenseRevocation='שלילה אחת'}
var sendData=$(document).find('#form-2').serialize();$.ajax({type:"POST",dataType:"json",url:sogo.ajaxurl,data:{'action':'sogo_send_order_data','order_data':sendData},success:function(response){console.log(response)
var redirect_url=response.link;if(response.ins_order!=='false'){redirect_url+='?ins_order='+response.ins_order+'&order_id='+response.order_id}else{alert('פג תוקף ההזמנה, יש להתחיל מהתחלה או חייג 03-7200500 ונשמח לעזור לך.')}
window.location.replace(redirect_url)}})}else{console.log('error')}});$(document).on('click','.buy-ins',function(e){e.preventDefault();var $this=$(this);var linkToPage=$(this).attr('href');var insOrder=$(this).data('order');var companyID=$(this).data('company');var havila=$(this).data('package');var in_type=$(this).data('in-type');var src=$(this).data('src');var aff=$(this).data('aff');var add_info=$(this).data('add-info');var insType=$(this).data('type');var insCompany=$.trim($(this).closest('.insurance-cube').find('.cube_for_mail .ins-company').text());if(+in_type===1){var mandatPrice=$(this).closest('.insurance-cube').find('.cube_for_mail .total').text();var secondPrice=''}else{var mandatPrice=$(this).closest('.insurance-cube').find('.cube_for_mail .mandat-price').find('span').text();var secondPrice=$(this).closest('.insurance-cube').find('.cube_for_mail .second-price').find('span').text()}
$.ajax({type:"POST",dataType:"json",url:sogo.ajaxurl,data:{'action':'sogo_update_insurance_params','link_page':linkToPage,'aff':aff,'src':src,'ins_order':insOrder,'company_id':companyID,'package':havila,'add_info':add_info,'ins_company':insCompany,'mandat_price':mandatPrice,'second_price':secondPrice,'in_type':in_type},success:function(response){window.location.href=response.link}})});$(document).on('click','input[name=ownership-date]',function(){if($(this).is(':checked')){if(+$(this).val()===1){$('input[name="ownership-under-year"]').val('');$('.under-year').datepicker({changeMonth:!0,changeYear:!0,defaultDate:null,minDate:'-31D',maxDate:'TODAY',onSelect:function(){var selectedDate=$(this).val();$('input[name="ownership-under-year"]').val(selectedDate)}});$(document).find('.under').removeClass('d-none')}else{$(document).find('.under').addClass('d-none');$('input[name="ownership-under-year"]').val('')}}});var birthPeriod=sogo_max_date_birthday('birthday-date',!1);var driverBirthPeriod=sogo_max_date_birthday('driver-birthday',!0);$('.birthday-date').datepicker({changeMonth:!0,changeYear:!0,maxDate:birthPeriod,yearRange:(new Date().getFullYear()-90)+':'+(new Date().getFullYear()-parseInt(birthPeriod/365)),onSelect:function(){var driversAllowed=document.querySelector('input[name=drive-allowed]:checked');if(driversAllowed===null||+driversAllowed.value===1){var selectedDate=$(this).val();var birthDayInput=$('input[name="birthday-date"]');birthDayInput.val(selectedDate);sogo_trigger_license_year()}}});$('.driver-birthday').datepicker({changeMonth:!0,changeYear:!0,maxDate:birthPeriod,yearRange:(new Date().getFullYear()-90)+':'+(new Date().getFullYear()-parseInt(birthPeriod/365)),onSelect:function(){var selectedDate=$(this).val();var index=$(this).data('index');$('#driver-birthday-'+index).val(selectedDate);sogo_driver_trigger_license_year($(this))}});$('.birthday-date .ui-datepicker-calendar').find(".ui-state-default").removeClass("ui-state-active");$('.driver-birthday .ui-datepicker-calendar').find(".ui-state-default").removeClass("ui-state-active");$("#use-phone-payment").on("change",function(){var paymentBox=$('.payment-box');if($('#use-phone-payment').prop("checked")){$('.card-current').each(function(){paymentBox.find('input').attr('disabled',!0).attr('readonly',!0);paymentBox.find('select').attr('disabled',!0).attr('readonly',!0);paymentBox.addClass('d-none')})}else{$('.card-current').each(function(){paymentBox.find('input').attr('disabled',!1).attr('readonly',!1);paymentBox.find('select').attr('disabled',!1).attr('readonly',!1);paymentBox.removeClass('d-none')})}});$('[data-toggle="tooltip"]').tooltip({html:!0});$(document).on("keypress","form",function(event){return event.keyCode!=13});$(document).on('change','#insurance-products',function(){var url=$(this).find('option:selected').data('url');$('#go-to-product').attr('href',url)})})})(jQuery);function sogo_driver_trigger_license_year(elem){elem.closest('.driver-box').find('.driver-license-box select').html('');elem.closest('.driver-box').find('.driver-license-box select').append('<option value="">בחר</option>');var birthDate=elem.val();var maxYear=elem.closest('.driver-box').find('.driver-license-box select').data('max-year');var birthDateSplit=birthDate.split('/');var year=parseInt(birthDateSplit[2]);var minYearLicense=year+17;var selectOptions='';for(var i=minYearLicense;i<=maxYear;i++){selectOptions+='<option value="'+i+'">'+i+'</option>'}
elem.closest('.driver-box').find('.driver-license-box select').append(selectOptions)}
function sogo_trigger_license_year(){var birthDate=jQuery(document).find('.birthday-date').val();var maxYear=jQuery(document).find('#license-year').data('max-year');var birthDateSplit=birthDate.split('/');var year=parseInt(birthDateSplit[2]);var minYearLicense=year+17;var selectOptions='<option disabled selected>'+'בחר'+'</option>';var selectedYear=document.getElementById('tmp_license_year').value,selected='';if(typeof selectedYear!==undefined){selected=selectedYear}
for(var i=minYearLicense;i<=maxYear;i++){if(+selected===+i){selectOptions+='<option selected value="'+i+'">'+i+'</option>'}else{selectOptions+='<option value="'+i+'">'+i+'</option>'}}
jQuery(document).find('#license-year').html('');jQuery(document).find('#license-year').append(selectOptions)}
function sogo_max_date_birthday(name,with_array){if(with_array){var startPeriod=jQuery(document).find('input.'+name).data('start')}else{var startPeriod=jQuery(document).find('input[name='+name+']').data('start')}
var period='-'+startPeriod+'D';return period}
function sogoPlayVideo(){jQuery('.js-play-video').on('click',function(){var url=jQuery(this).data('url');var src=jQuery(url).attr('src');jQuery('#sogo_simple_iframe').attr('src',src)})}
sogoPlayVideo()